; PlatformIO project for M5Stack Cardputer → Raspbot V2 teleop controller
; ESP32-S3 with 240×135 ST7789V2 display, 56-key keyboard, WiFi

[env:m5stack-cardputer]
platform = espressif32@6.7.0
board = esp32-s3-devkitc-1
framework = arduino
upload_speed = 1500000
monitor_speed = 115200

board_build.arduino.memory_type = qio_opi
board_build.partitions = default_8MB.csv

build_flags =
    -DESP32S3
    -DCORE_DEBUG_LEVEL=3
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1
    -DBOARD_HAS_PSRAM
    ; JPEG decoder uses PSRAM for frame buffers
    -DCONFIG_SPIRAM_USE_MALLOC

lib_deps =
    M5Cardputer=https://github.com/m5stack/M5Cardputer
    ; Lightweight JPEG decoder suitable for ESP32
    Bodmer/TJpg_Decoder@^1.1.0
